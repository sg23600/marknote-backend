let express,Notes;_b65‍.w("express",[["default",["express"],function(v){express=v}]]);_b65‍.w("../models/Notes",[["default",["Notes"],function(v){Notes=v}]]);


const route = express.Router()
// req => {obj, gId}

route.post("/new", async (req, res) => {
  await Notes.find({ googleId: req.body.googleId }, async (err, doc) => {
    if (doc.length === 0) {
      // add new record
      const note = {
        googleId: req.body.googleId,
        notes: [
          {
            id: 1,
            title: req.body.title,
            body: req.body.body,
            // lastEdited: req.body.lastEdited,
            private: req.body.private,
          },
        ],
      }
      let notesModel = new Notes(note)
      await notesModel.save()
      return res.json(notesModel)
    } else {
      // update existing record, add new object to array
      return res.json("updating record...")
    }
  }).exec()
})

module.export = route
